#!/bin/sh
#
#  srun-mpip
#
#  Chris Chambreau LLNL 1/6/05
#
#  If the application has been linked against an SO MPI library and 
#  SO versions of libmpiP, libbfd, and libiberty are available, this
#  script should preload libmpiP such that MPI routines are profiled
#  and an mpiP report is generated.
#
#  This script is a wrapper for srun  The use of "srun" to run a
#  parallel job can be replaced with "srun-mpip".  
#
#  You may need to preload other objects based on your MPI implementation
#  and compiler.


MPIP_SLIB_DIR=/usr/local/tools/mpiP/lib

export LD_PRELOAD=${MPIP_SLIB_DIR}/libmpiP.so


srun "$@"

exit $?
