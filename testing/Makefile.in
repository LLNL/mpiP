# Makefile for MPIP	-*-Makefile-*-
# Copyright (C) 2001 Jeffrey Vetter vetter3@llnl.gov
# $Header$

srcdir=@srcdir@
VPATH = $(srcdir)

include ../Defs.mak

CFLAGS	+= -I..
FFLAGS  += -g 
LDFLAGS	+= -L..
CXXLIBS	:= -l$(MPIPCXXLIB) $(LIBS) $(CXXLIBS)
FLIBS	:= -l$(MPIPFLIB) $(LIBS)
LIBS	:= -lmpiP $(LIBS)

CSRCS =	0-simple.c \
	0-simple-c++.C \
	1-hot-potato.c \
	2-pcontrol.c \
	3-stacktrace.c \
	4-demangle.C \
	5-medley.c \
	6-nonblock.c \
	7-nonblock-waitall.c \
	8-test.c \
	9-test-mpip-time.c \
	10-coll-mess-size.c \
	11-p2p-mess-size.c \
	12-null-null.c \
	13-pcontrol-report.c \
	14-mpiio.c \
	api-test.c \
	timer-info.c


FSRCS =	0-simplef.f sweep-ops.f sweep-ops-stack.f
TEXES = $(CSRCS:.c=.exe)
EXES = $(TEXES:.C=.exe)
EXES += $(FSRCS:.f=.exe)

all: ${EXES}
	@echo All done.

.SUFFIXES: .exe
.c.exe:
	${CC} ${CFLAGS} ${CPPFLAGS} $< -o $@ ${LDFLAGS} ${LIBS}

.C.exe:
	${CXX} ${CFLAGS} ${CPPFLAGS} $< -o $@ ${LDFLAGS} ${CXXLIBS}

.f.exe:
	${FC} ${FFLAGS} ${CPPFLAGS} $< -o $@ ${LDFLAGS} ${FLIBS}

clean::
	rm -f ${EXES} *.mpiP *.o

include $(srcdir)/../Rules.mak

##### EOF
